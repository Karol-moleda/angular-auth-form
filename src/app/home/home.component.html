<div class="home">
  <mat-toolbar color="primary" class="home__header">
    <span>AppVerk Dashboard</span>
    <span class="home__spacer"></span>
    <button mat-button (click)="logout()" class="home__logout-button">
      <mat-icon>logout</mat-icon>
      Wyloguj
    </button>
  </mat-toolbar>

  <div class="home__content">
    <div *ngIf="isLoading" class="home__loading">
      <mat-spinner diameter="40"></mat-spinner>
      <p class="home__loading-text">Ładowanie danych użytkownika...</p>
    </div>

    <mat-card *ngIf="!isLoading && errorMessage" class="home__error-card">
      <mat-card-content>
        <div class="home__error-container">
          <mat-icon class="home__error-icon">error</mat-icon>
          <p class="home__error-message">{{ errorMessage }}</p>
          <button
            mat-raised-button
            color="primary"
            (click)="loadUserData()"
            class="home__retry-button"
          >
            Spróbuj ponownie
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <div *ngIf="!isLoading && !errorMessage && userData" class="home__user-profile">
      <mat-card class="home__card home__welcome-card">
        <mat-card-content>
          <div class="home__welcome-header">
            <div class="home__avatar-container" *ngIf="userData.avatar">
              <img [src]="userData.avatar" alt="Profile picture" class="home__avatar" />
            </div>
            <div class="home__welcome-text">
              <h1 class="home__welcome-title">Witaj, {{ userData.firstName }}!</h1>
              <div class="home__role-badge">
                <mat-icon class="home__role-icon">badge</mat-icon>
                <span class="home__role-text">{{ userData.role }}</span>
              </div>
            </div>
          </div>

          <div class="home__auth-info">
            <mat-icon class="home__secure-icon">security</mat-icon>
            <span class="home__auth-text"
              >Jesteś uwierzytelniony za pomocą bezpiecznego tokena</span
            >
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="home__card home__details-card">
        <mat-card-header>
          <mat-card-title class="home__card-title">Dane osobowe</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="home__details-grid">
            <div class="home__detail-item">
              <span class="home__detail-label">Pełne imię</span>
              <span class="home__detail-value"
                >{{ userData.firstName }} {{ userData.lastName }}</span
              >
            </div>

            <div class="home__detail-item">
              <span class="home__detail-label">Email</span>
              <span class="home__detail-value">{{ userData.email }}</span>
            </div>

            <div class="home__detail-item">
              <span class="home__detail-label">Telefon</span>
              <span class="home__detail-value">{{ userData.phone }}</span>
            </div>

            <div class="home__detail-item">
              <span class="home__detail-label">Firma</span>
              <span class="home__detail-value">{{ userData.company }}</span>
            </div>

            <div class="home__detail-item">
              <span class="home__detail-label">Dział</span>
              <span class="home__detail-value">{{ userData.department }}</span>
            </div>

            <div class="home__detail-item">
              <span class="home__detail-label">Stanowisko</span>
              <span class="home__detail-value">{{ userData.position }}</span>
            </div>
          </div>

          <mat-divider class="home__divider"></mat-divider>

          <h3 class="home__section-title">Adres</h3>
          <div class="home__address">
            <p class="home__address-line">{{ userData.address.street }}</p>
            <p class="home__address-line">
              {{ userData.address.zipCode }} {{ userData.address.city }}
            </p>
            <p class="home__address-line">{{ userData.address.country }}</p>
          </div>

          <mat-divider class="home__divider"></mat-divider>

          <h3 class="home__section-title">Umiejętności</h3>
          <div class="home__skills">
            <mat-chip-set>
              <mat-chip
                *ngFor="let skill of userData.skills"
                matTooltip="Skill: {{ skill }}"
                class="home__skill-chip"
              >
                {{ skill }}
              </mat-chip>
            </mat-chip-set>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
